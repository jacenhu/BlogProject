# [SOSP03] GFS 论文阅读

  《The Google File System》发表于2003年。

## 关键词

故障容错，可扩展性。数据存储，集群存储

## 1 介绍

第一、组件故障是常态而不是异常。

> 故障原因：程序bug、OS bug、人为失误、磁盘、内存、网络、供电设备等。

第二、文件较大。

第三、大部分文件的更新是通过追加新数据而不是覆盖已有数据。

第四、共同设计应用程序和文件系统。

## 2 设计概述

### 2.1 假设

* 系统由需要经常故障的廉价组件构成。
* 系统由一定数量的大文件组成。
* 负载主要由两种读组成：大的流式读和小的随机读。
* 负载有很多大的追加写。一旦写完成，文件将很少被修改。
* 系统必须为多客户端并发操作文件提供良好语义。
* 高可持续的带宽比低时延更重要。

### 2.2 接口

文件在目录中以层次组织，并且以路径名标识。

支持通常的操作：create、delete、open、close、read、write。

此外支持：snapshot、record append。

### 2.3 架构

### 2.4 单主

### 2.5 块大小

### 2.6 元数据

#### 2.6.1 内存中的数据结构

#### 2.6.2 块的地址

####  2.6.3 操作日志

#### 2.7 一致性模型

## 3 系统交互

### 3.1 租约和变化顺序

### 3.2 数据流

### 3.3 原子记录追加

### 3.4 快照

## 4 主的操作

### 4.1 命名空间管理与锁定

### 4.2 副本位置

### 4.3 创建、再复制、再平衡

### 4.4 垃圾回收

#### 4.4.1 机制

#### 4.4.2 讨论

### 4.5 旧副本检测

## 5 故障容错和诊断

### 5.1 高可用性

### 5.2 数据完整性

### 5.3 诊断工具

## 6 测量

### 6.1 微型基准测试

### 6.2 真实的集群

### 6.3 负载分解

## 7 经验

## 8 相关的工作

## 9 结论